# =========================================
# 核心配置
# =========================================
server:
  port: 8080

spring:
  # -------------------------------------
  # 数据源配置 (H2 数据库，文件模式)
  # -------------------------------------
  datasource:
    url: jdbc:h2:file:./data/reading_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: password
  
  # -------------------------------------
  # JPA / Hibernate 配置
  # -------------------------------------
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update # 实体模型发生变化时自动更新数据库结构
    show-sql: true # 打印 SQL 语句到控制台
  
  # -------------------------------------
  # Redis 配置 (从前一个配置中保留)
  # -------------------------------------
  data:
    redis:
      host: localhost
      port: 6379

  #邮件
  mail:
    host: smtp.exmail.qq.com # 邮件服务器地址（示例为腾讯企业邮）
    port: 465 # SMTP 端口 (SSL通常是465)
    username: your_service_email@example.com # 发件邮箱
    password: YOUR_PASSWORD_OR_APP_KEY # 授权码或密码
    protocol: smtps
    default-encoding: UTF-8
    properties:
      mail.smtp.ssl.enable: true
      mail.smtp.auth: true
      mail.smtp.timeout: 5000

# =========================================
# 自定义属性配置
# =========================================

# JWT 配置
jwt:
  secret: your-secret-key-here # 建议替换为至少 32 字符的安全密钥
  expiration: 86400000 # Token 有效期（毫秒），此处为 24 小时

# CORS 配置 (通常用于配置一个 WebMvcConfigurer 或 CorsFilter)
cors:
  allowed-origins:
    - http://localhost:5173
    - http://127.0.0.1:5173

# 阿里云短信配置 (从前一个配置中保留)
aliyun:
  sms:
    region-id: cn-hangzhou
    access-key-id: YOUR_ALIYUN_ACCESS_KEY_ID
    access-key-secret: YOUR_ALIYUN_ACCESS_KEY_SECRET
    sign-name: 您的短信签名
    template-code: SMS_000000000

payment:
  # 统一的回调通知地址 (Notify URL)
  base-notify-url: https://api.weread.com/payment/callback/

  wechat:
    app-id: wx1234567890abcdef # 微信支付应用ID
    merchant-id: 1900000100 # 微信支付商户号
    api-secret: 32位API密钥字符串 # API密钥 V2版本 (V3使用证书和私钥)
    create-order-url: https://api.mch.weixin.qq.com/pay/unifiedorder # 微信支付 V2 统一下单接口
    query-order-url: https://api.mch.weixin.qq.com/pay/orderquery
    
  alipay:
    app-id: 20140723000xxxxxxx # 支付宝应用ID
    gateway-url: https://openapi.alipay.com/gateway.do # 支付宝网关地址
    private-key: MIIEvQIBADANBgkqhkiG9w... # 您的应用私钥 (PEM格式)
    public-key: MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCg... # 支付宝公钥
