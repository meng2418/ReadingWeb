# =========================================
# 核心配置
# =========================================
server:
  port: 8080

spring:
  # -------------------------------------
  # 数据源配置 (H2 数据库，文件模式)
  # -------------------------------------
  datasource:
    url: jdbc:mysql://localhost:3306/wechatreading_db?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root # 替换为您的 MySQL 用户名
    password: 123456 # 替换为您的 MySQL 密码
  
  # -------------------------------------
  # JPA / Hibernate 配置
  # -------------------------------------
  jpa:
    database-platform: org.hibernate.dialect.MySQLDialect # (保留这个以兼容Spring Boot Autoconfigure)
    properties:
      # 显式告诉 Hibernate 使用 MySQL 8 方言
      hibernate.dialect: org.hibernate.dialect.MySQLDialect
      # 禁用对序列（SEQUENCES）表的查询，这是解决问题的关键
      hibernate.id.disable_sequences: true
      
    hibernate:
      # ddl-auto 保持不变
      ddl-auto: update 
    show-sql: true
  
  # -------------------------------------
  # Redis 配置 (从前一个配置中保留)
  # -------------------------------------
  data:
    redis:
      host: localhost
      port: 6379


# =========================================
# 自定义属性配置
# =========================================

# JWT 配置
jwt:
  secret: your-secret-key-here # 建议替换为至少 32 字符的安全密钥
  expiration: 86400000 # Token 有效期（毫秒），此处为 24 小时

# CORS 配置 (通常用于配置一个 WebMvcConfigurer 或 CorsFilter)
cors:
  allowed-origins:
    - http://localhost:5173
    - http://127.0.0.1:5173

# 阿里云短信配置 (从前一个配置中保留)
aliyun:
  sms:
    region-id: cn-hangzhou
    access-key-id: YOUR_ALIYUN_ACCESS_KEY_ID
    access-key-secret: YOUR_ALIYUN_ACCESS_KEY_SECRET
    sign-name: 您的短信签名
    template-code: SMS_000000000

payment:
  # 统一的回调通知地址 (Notify URL)
  base-notify-url: https://api.weread.com/payment/callback/

  wechat:
    app-id: wx1234567890abcdef # 微信支付应用ID
    merchant-id: 1900000100 # 微信支付商户号
    api-secret: 32位API密钥字符串 # API密钥 V2版本 (V3使用证书和私钥)
    create-order-url: https://api.mch.weixin.qq.com/pay/unifiedorder # 微信支付 V2 统一下单接口
    query-order-url: https://api.mch.weixin.qq.com/pay/orderquery
    
  alipay:
    app-id: 20140723000xxxxxxx # 支付宝应用ID
    gateway-url: https://openapi.alipay.com/gateway.do # 支付宝网关地址
    private-key: MIIEvQIBADANBgkqhkiG9w... # 您的应用私钥 (PEM格式)
    public-key: MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCg... # 支付宝公钥

# 数据库路径配置
app:
  geoip:
    database-path: classpath:geolite2/GeoLite2-City.mmdb