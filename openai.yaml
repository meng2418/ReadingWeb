openapi: 3.0.1
info:
  title: 微信读书网页版 API
  description: 根据前端需求整理的接口文档
  version: 2.0.0
tags:
  - name: 认证
  - name: 首页
  - name: 分类
  - name: 书架
  - name: 社区
  - name: 话题
  - name: 个人中心
  - name: 用户关系
  - name: 支付
  - name: 搜索
  - name: 书籍详情
  - name: 阅读器
  - name: 消息通知
  - name: 用户中心
  - name: 阅读统计
paths:
  /auth/send-verification-code:
    post:
      summary: 发送验证码
      deprecated: false
      description: ''
      tags:
        - 认证
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - phone
              properties:
                phone:
                  type: string
                  pattern: ^1[3-9]\d{9}$
        required: true
      responses:
        '200':
          description: 验证码发送成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '429':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /auth/register:
    post:
      summary: 注册
      deprecated: false
      description: ''
      tags:
        - 认证
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - phone
                - verificationCode
                - password
                - confirmPassword
              properties:
                username:
                  type: string
                  minLength: 2
                  maxLength: 20
                phone:
                  type: string
                  pattern: ^1[3-9]\d{9}$
                verificationCode:
                  type: string
                  pattern: ^\d{6}$
                password:
                  type: string
                  minLength: 6
                confirmPassword:
                  type: string
        required: true
      responses:
        '201':
          description: 注册成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/UserSimpleVO'
                          token:
                            type: string
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /auth/login:
    post:
      summary: 登录
      deprecated: false
      description: ''
      tags:
        - 认证
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - phone
                - type
              properties:
                phone:
                  type: string
                  pattern: ^1[3-9]\d{9}$
                type:
                  type: string
                  enum:
                    - password
                    - verificationCode
                password:
                  type: string
                  nullable: true
                verificationCode:
                  type: string
                  nullable: true
            examples: {}
        required: true
      responses:
        '200':
          description: 登录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/UserSimpleVO'
                          token:
                            type: string
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /auth/reset-password:
    post:
      summary: 找回密码
      deprecated: false
      description: ''
      tags:
        - 认证
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - phone
                - verificationCode
                - newPassword
                - confirmPassword
              properties:
                phone:
                  type: string
                  pattern: ^1[3-9]\d{9}$
                verificationCode:
                  type: string
                  pattern: ^\d{6}$
                newPassword:
                  type: string
                  minLength: 6
                confirmPassword:
                  type: string
        required: true
      responses:
        '200':
          description: 密码重置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /home/recent-books:
    get:
      summary: 获取用户最新阅读的4本书
      deprecated: false
      description: ''
      tags:
        - 首页
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        bookId:
                          type: integer
                        cover:
                          type: string
                      minProperties: 0
                      maxProperties: 4
                required:
                  - code
                  - message
              example:
                code: 200
                message: success
                data:
                  - bookId: 0
                    cover: string
          headers: {}
      security: []
  /home/reading-stats:
    get:
      summary: 获取本周/月/总阅读时长
      deprecated: false
      description: ''
      tags:
        - 首页
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          weeklyReadingTime:
                            type: integer
                            maximum: 10080
                            minimum: 0
                          monthlyReadingTime:
                            type: integer
                            minimum: 0
                            maximum: 43200
                          totalReadingTime:
                            type: integer
                            maximum: 100000
                            minimum: 0
          headers: {}
      security: []
  /home/recommendations:
    get:
      summary: 获取猜你想看书籍（6本）
      deprecated: false
      description: ''
      tags:
        - 首页
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 返回6本推荐书籍
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        maxItems: 6
                        minItems: 6
                        items:
                          type: object
                          properties:
                            cover:
                              type: string
                              format: uri
                              description: 封面图URL
                            bookTitle:
                              type: string
                              description: 书名
                            authorName:
                              type: string
                              description: 作者名
                            description:
                              type: string
                              description: 作品简介
                            bookId:
                              type: integer
                              description: 书籍id
                          required:
                            - bookId
          headers: {}
      security: []
  /home/rankings/{type}:
    get:
      summary: 获取书籍榜单（10本）
      deprecated: false
      description: ''
      tags:
        - 首页
      parameters:
        - name: type
          in: path
          description: |
            - weekly: 周榜
            - monthly: 月榜  
            - new: 新书榜
            - masterpiece: 神作榜
          required: true
          example: ''
          schema:
            type: string
            enum:
              - weekly
              - monthly
              - new
              - masterpiece
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 返回10本榜单书籍
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        maxItems: 10
                        minItems: 10
                        items:
                          type: object
                          properties:
                            cover:
                              type: string
                              format: uri
                              description: 封面图URL
                            bookTitle:
                              type: string
                              description: 书名
                            authorName:
                              type: string
                              description: 作者名
                            authorId:
                              type: integer
                              description: 作者id
                            rating:
                              type: integer
                              description: 推荐值
                              maximum: 100
                            readCount:
                              type: integer
                              description: 今日阅读人数
                            description:
                              type: string
                              description: 作品简介
                            bookId:
                              type: integer
                          required:
                            - bookId
                            - cover
                            - bookTitle
                            - authorName
                            - authorId
          headers: {}
      security: []
  /categories:
    get:
      summary: 获取全部分类
      deprecated: true
      description: ''
      tags:
        - 分类
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            categoryName:
                              type: string
                            categoryId:
                              type: integer
                          required:
                            - categoryId
          headers: {}
      security: []
  /categories/{categoryId}/books:
    get:
      summary: 获取分类下的书籍（最多50本）
      deprecated: false
      description: ''
      tags:
        - 分类
      parameters:
        - name: categoryId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 50
            minimum: 1
            maximum: 50
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 返回分类书籍列表
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          books:
                            type: array
                            items:
                              type: object
                              properties:
                                cover:
                                  type: string
                                  format: uri
                                  description: 封面图URL
                                bookTitle:
                                  type: string
                                  description: 书名
                                authorName:
                                  type: string
                                  description: 作者名
                                authorId:
                                  type: integer
                                  description: 作者id
                                rating:
                                  type: integer
                                  description: 推荐值
                                  maximum: 100
                                readCount:
                                  type: integer
                                  description: 今日阅读人数
                                description:
                                  type: string
                                  description: 作品简介
                                bookId:
                                  type: integer
                              required:
                                - bookId
                                - cover
                                - bookTitle
                                - authorName
                                - authorId
                            maxItems: 50
                          total:
                            type: integer
                            description: 该分类下书籍总数
                            default: 50
          headers: {}
      security: []
  /bookshelf/batch-remove:
    delete:
      summary: 批量从书架移除书籍
      deprecated: false
      description: ''
      tags:
        - 书架
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                bookIds:
                  type: array
                  items:
                    type: integer
              required:
                - bookIds
            examples: {}
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: 'null'
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data: null
          headers: {}
      security: []
  /bookshelf/{status}:
    get:
      summary: 获取书架未读/在读/读完书籍
      deprecated: false
      description: ''
      tags:
        - 书架
      parameters:
        - name: status
          in: path
          description: ''
          required: true
          example: finished
          schema:
            type: string
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
              example:
                code: 200
                message: success
                data:
                  - bookId: 3
                    bookTitle: 活着
                    author: 余华
                    cover: https://img.example.com/huozhe.jpg
                    readingStatus: finished
      security: []
  /bookshelf/add/{bookId}:
    post:
      summary: 添加书籍到书架
      deprecated: false
      description: ''
      tags:
        - 书架
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: 'null'
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /bookshelf:
    get:
      summary: 获取书架全部书籍
      deprecated: false
      description: ''
      tags:
        - 书架
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          allOf:
                            - type: object
                              properties:
                                cover:
                                  type: string
                                  format: uri
                                  description: 封面图URL
                                bookTitle:
                                  type: string
                                  description: 书名
                                readingStatus:
                                  type: string
                                  enum:
                                    - unread
                                    - reading
                                    - finished
                                bookId:
                                  type: integer
                              required:
                                - readingStatus
                                - bookTitle
                                - cover
                                - bookId
          headers: {}
      security: []
  /messages/my-posts/comments:
    get:
      summary: 获取我的帖子的评论瀑布流
      deprecated: false
      description: ''
      tags:
        - 社区
        - 消息通知
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      comments:
                        type: array
                        items:
                          type: object
                          properties:
                            commentId:
                              type: integer
                            postId:
                              type: integer
                            postTitle:
                              type: string
                            commenter:
                              type: object
                              properties:
                                userId:
                                  type: integer
                                username:
                                  type: string
                                avatar:
                                  type: string
                              required:
                                - userId
                                - username
                                - avatar
                            commentContent:
                              type: string
                            commentTime:
                              type: string
                            parentCommentId:
                              type: integer
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                    required:
                      - comments
                      - hasMore
                      - nextCursor
                required:
                  - code
                  - message
                  - data
          headers: {}
      security: []
  /messages/likes:
    get:
      summary: 获取我的帖子的点赞瀑布流
      deprecated: false
      description: ''
      tags:
        - 社区
        - 消息通知
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      likes:
                        type: array
                        items:
                          type: object
                          properties:
                            likeId:
                              type: integer
                            targetType:
                              type: string
                              enum:
                                - post
                                - comment
                            targetId:
                              type: integer
                            postTitle:
                              type: string
                            commentContent:
                              type: string
                            liker:
                              type: object
                              properties:
                                userId:
                                  type: integer
                                username:
                                  type: string
                                avatar:
                                  type: string
                              required:
                                - userId
                                - username
                                - avatar
                            likeTime:
                              type: string
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                    required:
                      - likes
                      - hasMore
                      - nextCursor
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  likes:
                    - likeId: 0
                      targetType: post
                      targetId: 0
                      postTitle: string
                      commentContent: string
                      liker:
                        userId: 0
                        username: string
                        avatar: string
                      likeTime: '2025-12-25T08:36:21.182Z'
                  hasMore: true
                  nextCursor: string
          headers: {}
      security: []
  /likes:
    post:
      summary: 点赞/取赞帖子或评论
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                targetId:
                  type: integer
                targetType:
                  type: string
                  enum:
                    - post
                    - comment
                commentId:
                  type: integer
                postId:
                  type: integer
              required:
                - commentId
                - postId
                - targetId
                - targetType
            examples: {}
        required: true
      responses:
        '200':
          description: 操作成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isLiked:
                            type: boolean
                          likeCount:
                            type: integer
                          likeTime:
                            type: string
                            format: date-time
                          likedUser:
                            type: object
                            properties:
                              avatar:
                                type: string
                                format: uri
                              username:
                                type: string
          headers: {}
      security: []
  /comments/{commentId}/reply:
    post:
      summary: 回复评论
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: commentId
          in: path
          description: ''
          required: true
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
              required:
                - content
            example:
              content: string
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      comment:
                        type: object
                        properties:
                          commentId:
                            type: integer
                          userId:
                            type: integer
                          username:
                            type: string
                          avatar:
                            type: string
                          content:
                            type: string
                          commentTime:
                            type: string
                          replyToUsername:
                            type: string
                          parentCommentId:
                            type: integer
                        required:
                          - commentId
                          - userId
                          - username
                          - avatar
                          - content
                          - commentTime
                          - replyToUsername
                          - parentCommentId
                      replyCount:
                        type: integer
                    required:
                      - comment
                      - replyCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  comment:
                    commentId: 0
                    userId: 0
                    username: string
                    avatar: string
                    content: string
                    commentTime: '2025-12-26T09:05:57.482Z'
                    replyToUsername: string
                    parentCommentId: 0
                  replyCount: 0
          headers: {}
      security: []
  /posts/search/books:
    get:
      summary: 发帖时搜索书籍
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: keyword
          in: query
          description: ''
          required: true
          schema:
            type: string
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      books:
                        type: array
                        items:
                          type: object
                          properties:
                            bookId:
                              type: integer
                            bookTitle:
                              type: string
                            authorName:
                              type: string
                      nextCursor:
                        type: integer
                      hasMore:
                        type: boolean
                    required:
                      - books
                      - nextCursor
                      - hasMore
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  books:
                    - bookId: 101
                      bookTitle: 三体
                      authorName: 刘慈欣
                  nextCursor: book_101_1700000000
                  hasMore: true
          headers: {}
      security: []
  /posts/search/topics:
    get:
      summary: 发帖时搜索话题
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: keyword
          in: query
          description: ''
          required: true
          schema:
            type: string
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      topics:
                        type: array
                        items:
                          type: object
                          properties:
                            topicId:
                              type: integer
                            topicName:
                              type: string
                            viewCount:
                              type: integer
                            discussionCount:
                              type: integer
                      nextCursor:
                        type: integer
                      hasMore:
                        type: boolean
                    required:
                      - topics
                      - nextCursor
                      - hasMore
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  topics:
                    - topicId: 25
                      topicName: 科幻小说
                      viewCount: 12500
                      discussionCount: 356
                  nextCursor: topic_25_1700000000
                  hasMore: true
          headers: {}
      security: []
  /posts:
    get:
      summary: 获取广场/关注页帖子
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: type
          in: query
          description: ''
          required: true
          schema:
            type: string
            enum:
              - square
              - following
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            postId:
                              type: integer
                            author:
                              type: object
                              properties:
                                authorAvatar:
                                  type: string
                                  format: uri
                                  description: 发帖人头像
                                authorName:
                                  type: string
                                  description: 发帖人名字
                              required:
                                - authorAvatar
                                - authorName
                            publishTime:
                              type: string
                              format: date-time
                              description: 发布时间
                            publishLocation:
                              type: string
                              description: 发布地点
                            isFollowingAuthor:
                              type: boolean
                              description: 登录用户是否关注作者
                            postTitle:
                              type: string
                              description: 帖子标题
                            content:
                              type: string
                              description: 帖子正文
                            mentionedFirstBook:
                              type: object
                              properties:
                                cover:
                                  type: string
                                  format: uri
                                  description: 封面图URL
                                bookTitle:
                                  type: string
                                  description: 书名
                                authorName:
                                  type: string
                                  description: 作者名
                                bookId:
                                  type: integer
                                  description: 书籍id
                              description: 帖子提及第一本书籍
                              required:
                                - cover
                                - bookTitle
                                - authorName
                                - bookId
                            commentCount:
                              type: integer
                              description: 评论数
                            likeCount:
                              type: integer
                              description: 点赞数
                            isLiked:
                              type: boolean
                              description: 是否已点赞
                            topics:
                              type: array
                              items:
                                type: string
                                description: |
                                  话题名称
                              description: 话题列表
                        minItems: 2
                        maxItems: 6
          headers: {}
      security: []
    post:
      summary: 发布帖子
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PublishPostRequest'
            examples: {}
        required: true
      responses:
        '201':
          description: 发布成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties: {}
                required:
                  - code
                  - message
                  - data
              example:
                code: 201
                message: success
                data: {}
          headers: {}
      security: []
  /posts/{postId}:
    get:
      summary: 获取帖子详情
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: postId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          postId:
                            type: integer
                          author:
                            type: object
                            properties:
                              authorId:
                                type: integer
                              authorAvatar:
                                type: string
                                format: uri
                                description: 发帖人头像
                              authorName:
                                type: string
                                description: 发帖人名字
                            required:
                              - authorAvatar
                              - authorName
                              - authorId
                          publishTime:
                            type: string
                            format: date-time
                            description: 发布时间
                          publishLocation:
                            type: string
                            description: 发布地点
                          isFollowingAuthor:
                            type: boolean
                            description: 登录用户是否关注作者
                          postTitle:
                            type: string
                            description: 帖子标题
                          content:
                            type: string
                            description: 帖子正文
                          mentionedBooks:
                            type: array
                            items:
                              type: object
                              properties:
                                cover:
                                  type: string
                                  format: uri
                                  description: 封面图URL
                                bookTitle:
                                  type: string
                                  description: 书名
                                authorName:
                                  type: string
                                  description: 作者名
                                description:
                                  type: string
                                  description: 作品简介
                                bookId:
                                  type: integer
                                  description: 书籍Id
                              required:
                                - cover
                                - bookTitle
                                - authorName
                                - bookId
                            description: 帖子提及书籍列表
                          commentCount:
                            type: integer
                            description: 评论数
                          likeCount:
                            type: integer
                            description: 点赞数
                          isLiked:
                            type: boolean
                            description: 是否已点赞
                          topics:
                            type: array
                            items:
                              type: string
                              description: |
                                话题名称
                            description: 话题列表
                        required:
                          - author
          headers: {}
      security: []
    delete:
      summary: 删除帖子
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: postId
          in: path
          description: ''
          required: true
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      deletedPostId:
                        type: integer
                      remainingPostCount:
                        type: integer
                    required:
                      - deletedPostId
                      - remainingPostCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  deletedPostId: 0
                  remainingPostCount: 0
          headers: {}
      security: []
  /posts/{postId}/likes/detailed:
    get:
      summary: 获取帖子点赞详情（仅作者可见）
      deprecated: false
      description: 仅帖子作者可以查看详细的点赞用户列表
      tags:
        - 社区
      parameters:
        - name: postId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功（仅作者可见）
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          totalLikes:
                            type: integer
                          likedUsers:
                            type: array
                            items:
                              type: object
                              properties:
                                userId:
                                  type: integer
                                username:
                                  type: string
                                avatar:
                                  type: string
                                  format: uri
                                likeTime:
                                  type: string
                                  format: date-time
          headers: {}
        '403':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '404':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /posts/{postId}/comments:
    get:
      summary: 获取评论列表
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: postId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            avatar:
                              type: string
                              format: uri
                              description: 评论头像
                            username:
                              type: string
                              description: 评论用户名称
                            commentTime:
                              type: string
                              format: date-time
                              description: 评论时间
                            content:
                              type: string
                              description: 评论内容
                            likeCount:
                              type: integer
                              description: 评论点赞数
                            replyCount:
                              type: integer
                              description: 子评论数
                            isLiked:
                              type: boolean
                              description: 是否已点赞
                            replyToUsername:
                              type: string
                              description: 被回复的用户名，null表示不是回复评论
                            replyToUserId:
                              type: integer
                              description: 被回复的用户ID
                            isReply:
                              type: boolean
                              description: 是否是回复评论（replyToUsername不为null）
                            commentId:
                              type: integer
                          required:
                            - commentId
          headers: {}
      security: []
    post:
      summary: 发布帖子评论
      deprecated: false
      description: ''
      tags:
        - 社区
      parameters:
        - name: postId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  minLength: 1
                  maxLength: 1000
            examples: {}
        required: true
      responses:
        '201':
          description: 评论成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          comment:
                            type: object
                            properties:
                              avatar:
                                type: string
                                format: uri
                                description: 评论头像
                              username:
                                type: string
                                description: 评论用户名称
                              commentTime:
                                type: string
                                format: date-time
                                description: 评论时间
                              content:
                                type: string
                                description: 评论内容
                              likeCount:
                                type: integer
                                description: 评论点赞数
                              replyCount:
                                type: integer
                                description: 子评论数
                              isLiked:
                                type: boolean
                                description: 是否已点赞
                              commentId:
                                type: integer
                            required:
                              - commentId
                          commentCount:
                            type: integer
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '404':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /topics:
    get:
      summary: 获取所有话题瀑布流
      deprecated: false
      description: ''
      tags:
        - 话题
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            topicId:
                              type: integer
                            topicName:
                              type: string
                            image:
                              type: string
                            postCount:
                              type: integer
                          minProperties: 8
                        minItems: 8
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                    required:
                      - items
                      - hasMore
                      - nextCursor
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  items:
                    - topicId: 1
                      topicName: 人工智能
                      image: https://example.com/image.jpg
                      postCount: 1250
                  hasMore: true
                  nextCursor: 25
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties: {}
                required:
                  - code
                  - message
                  - data
              example:
                code: 400
                message: 参数错误
                data: {}
          headers: {}
        '500':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties: {}
                required:
                  - code
                  - message
                  - data
              example:
                code: 500
                message: 服务器内部错误
                data: {}
          headers: {}
      security: []
  /topics/{topicId}/follow:
    post:
      summary: 关注话题
      deprecated: false
      description: ''
      tags:
        - 话题
      parameters:
        - name: topicId
          in: path
          description: ''
          required: true
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      isFollowing:
                        type: boolean
                    required:
                      - isFollowing
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  isFollowing: true
      security: []
    delete:
      summary: 取消关注话题
      deprecated: false
      description: ''
      tags:
        - 话题
      parameters:
        - name: topicId
          in: path
          description: ''
          required: true
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      isFollowing:
                        type: boolean
                    required:
                      - isFollowing
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  isFollowing: false
          headers: {}
      security: []
  /topics/hot:
    get:
      summary: 获取热门话题列表10个
      deprecated: false
      description: ''
      tags:
        - 话题
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            topicName:
                              type: string
                            topicId:
                              type: integer
                              minimum: 9
                              maximum: 9
                          required:
                            - topicId
                            - topicName
                          minProperties: 9
                          maxProperties: 9
                        minItems: 9
                        maxItems: 9
                    minProperties: 9
                    maxProperties: 9
          headers: {}
      security: []
  /topics/{topicId}:
    get:
      summary: 获取话题详情页
      deprecated: false
      description: ''
      tags:
        - 话题
      parameters:
        - name: topicId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          image:
                            type: string
                            format: uri
                            description: 话题图片
                          topicName:
                            type: string
                            description: 话题名称
                          postCount:
                            type: integer
                            description: 话题帖子数
                          description:
                            type: string
                            description: 话题简介
                          followerCount:
                            type: integer
                            description: 话题关注人数
                          todayPostCount:
                            type: integer
                            description: 话题今日发帖数
                          isFollowing:
                            type: boolean
                            description: 是否关注话题
                          introduction:
                            type: string
                            description: 话题介绍内容
                          createdAt:
                            type: string
                            format: date-time
                            description: 创建时间
                          adminName:
                            type: string
                            description: 管理员名字
                          relatedTopics:
                            type: array
                            items:
                              type: object
                              properties:
                                image:
                                  type: string
                                  format: uri
                                name:
                                  type: string
                                postCount:
                                  type: integer
                                topicId:
                                  type: integer
                              required:
                                - topicId
                              minProperties: 9
                            minItems: 9
                        required:
                          - topicName
                          - image
                          - postCount
                          - isFollowing
          headers: {}
      security: []
  /topics/{topicId}/posts:
    get:
      summary: 获取话题最新/热门/精华帖子瀑布流
      deprecated: false
      description: ''
      tags:
        - 话题
      parameters:
        - name: topicId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: sort
          in: query
          description: ''
          required: true
          schema:
            type: string
            enum:
              - latest
              - hot
              - quality
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          allOf:
                            - $ref: '#/components/schemas/Post'
                            - type: object
                              properties:
                                relatedTopics:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      image:
                                        type: string
                                        format: uri
                                      topicName:
                                        type: string
                                      postCount:
                                        type: integer
          headers: {}
      security: []
  /user/home:
    get:
      summary: 获取登录用户个人中心
      deprecated: false
      description: ''
      tags:
        - 个人中心
        - 用户中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserProfile'
          headers: {}
      security: []
  /user/posts:
    get:
      summary: 获取登录用户帖子瀑布流
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      posts:
                        type: array
                        items:
                          type: object
                          properties:
                            postId:
                              type: integer
                            authorAvatar:
                              type: string
                            authorName:
                              type: string
                            publishTime:
                              type: string
                            publishLocation:
                              type: string
                            isFollowingAuthor:
                              type: boolean
                            postTitle:
                              type: string
                            content:
                              type: string
                            mentionedBooks:
                              type: array
                              items:
                                type: object
                                properties:
                                  cover:
                                    type: string
                                  bookTitle:
                                    type: string
                                  authorName:
                                    type: string
                                  rating:
                                    type: integer
                                  readCount:
                                    type: integer
                                  description:
                                    type: string
                                  isFinished:
                                    type: boolean
                            commentCount:
                              type: integer
                            likeCount:
                              type: integer
                            isLiked:
                              type: boolean
                            topics:
                              type: array
                              items:
                                type: string
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                      postCount:
                        type: integer
                      commentCount:
                        type: integer
                      likeCount:
                        type: integer
                    required:
                      - posts
                      - hasMore
                      - nextCursor
                      - postCount
                      - commentCount
                      - likeCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  posts:
                    - postId: 0
                      authorAvatar: string
                      authorName: string
                      publishTime: '2025-12-25T07:24:24.887Z'
                      publishLocation: string
                      isFollowingAuthor: true
                      postTitle: string
                      content: string
                      mentionedBooks:
                        - cover: string
                          bookTitle: string
                          authorName: string
                          rating: 0
                          readCount: 0
                          description: string
                          isFinished: true
                      commentCount: 0
                      likeCount: 0
                      isLiked: true
                      topics:
                        - string
                  hasMore: true
                  nextCursor: string
                  postCount: 0
                  commentCount: 0
                  likeCount: 0
          headers: {}
      security: []
  /user/notes:
    get:
      summary: 获取登录用户的笔记瀑布流
      deprecated: false
      description: 笔记=划线+想法，这里是获取全部笔记，个人中心会根据noteType进行分流划线和想法，阅读器则调用全部。
      tags:
        - 个人中心
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      notes:
                        type: array
                        items:
                          type: object
                          properties:
                            markId:
                              type: integer
                            bookId:
                              type: integer
                            bookTitle:
                              type: string
                            chapterId:
                              type: integer
                            chapterName:
                              type: string
                            quote:
                              type: string
                            startIndex:
                              type: integer
                            endIndex:
                              type: integer
                            pageNumber:
                              type: integer
                            lineTypes:
                              type: array
                              items:
                                type: string
                            noteContent:
                              type: string
                            noteCreatedAt:
                              type: string
                            noteType:
                              type: string
                              enum:
                                - highlight
                                - thought
                              description: 枚举类型highlight/thought
                          required:
                            - noteType
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                      noteCount:
                        type: integer
                    required:
                      - notes
                      - hasMore
                      - nextCursor
                      - noteCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  notes:
                    - markId: 0
                      bookId: 0
                      bookTitle: string
                      chapterId: 0
                      chapterName: string
                      quote: string
                      startIndex: 0
                      endIndex: 0
                      pageNumber: 0
                      lineTypes:
                        - marker
                      noteContent: string
                      noteCreatedAt: '2025-12-25T07:45:25.915Z'
                  hasMore: true
                  nextCursor: string
                  noteCount: 0
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /user/book-reviews:
    get:
      summary: 获取登录用户书评瀑布流
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      reviews:
                        type: array
                        items:
                          type: object
                          properties:
                            cover:
                              type: string
                            bookTitle:
                              type: string
                            reviewDate:
                              type: string
                            helpfulCount:
                              type: integer
                            reviewContent:
                              type: string
                            rating:
                              type: string
                              enum:
                                - recommend
                                - average
                                - bad
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                      reviewCount:
                        type: integer
                    required:
                      - reviews
                      - hasMore
                      - nextCursor
                      - reviewCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  reviews:
                    - cover: string
                      bookTitle: string
                      reviewDate: '2025-12-25'
                      helpfulCount: 0
                      reviewContent: string
                      rating: recommend
                  hasMore: true
                  nextCursor: string
                  reviewCount: 0
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /user/latest-milestones:
    get:
      summary: 获取用户阅历最新里程碑
      deprecated: false
      description: |-
        返回用户每种里程碑类型的最新一条记录（只显示最新达到的里程碑）：

        累计阅读本数里程碑（只显示最新达到的20/40/60...）
        笔记数量里程碑（只显示最新达到的50/100/150...）
        读完本数里程碑（只显示最新达到的10/20/30...）
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      totalReadingMilestone:
                        type: object
                        properties:
                          targetCount:
                            type: integer
                          achievedBookTitle:
                            type: string
                          achievedAt:
                            type: string
                          message:
                            type: string
                        required:
                          - targetCount
                          - achievedBookTitle
                          - achievedAt
                          - message
                      noteCountMilestone:
                        type: object
                        properties:
                          targetCount:
                            type: integer
                          achievedBookTitle:
                            type: string
                          achievedNoteContent:
                            type: string
                          achievedAt:
                            type: string
                          message:
                            type: string
                        required:
                          - targetCount
                          - achievedBookTitle
                          - achievedNoteContent
                          - achievedAt
                          - message
                      finishedReadingMilestone:
                        type: object
                        properties:
                          targetCount:
                            type: integer
                          achievedBookTitle:
                            type: string
                          achievedAt:
                            type: string
                          message:
                            type: string
                        required:
                          - targetCount
                          - achievedBookTitle
                          - achievedAt
                          - message
                    required:
                      - totalReadingMilestone
                      - noteCountMilestone
                      - finishedReadingMilestone
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  totalReadingMilestone:
                    targetCount: 40
                    achievedBookTitle: string
                    achievedAt: '2025-12-25T08:13:35.898Z'
                    message: 恭喜！您已累计阅读40本书
                  noteCountMilestone:
                    targetCount: 50
                    achievedBookTitle: string
                    achievedNoteContent: string
                    achievedAt: '2025-12-25T08:13:35.898Z'
                    message: 恭喜！您已创作50条笔记
                  finishedReadingMilestone:
                    targetCount: 10
                    achievedBookTitle: string
                    achievedAt: '2025-12-25T08:13:35.898Z'
                    message: 恭喜！您已读完10本书
          headers: {}
      security: []
  /user/reading-stats/top-books:
    get:
      summary: 获取用户特定时间段阅读最久3本
      deprecated: false
      description: ''
      tags:
        - 个人中心
        - 阅读统计
      parameters:
        - name: period
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - week
              - month
              - year
              - total
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      period:
                        type: string
                        enum:
                          - week
                          - month
                          - year
                          - total
                      topBooks:
                        type: array
                        items:
                          type: object
                          properties:
                            bookId:
                              type: integer
                            cover:
                              type: string
                            bookTitle:
                              type: string
                            readingTime:
                              type: integer
                              maximum: 60
                              minimum: 0
                          minProperties: 9
                    required:
                      - period
                      - topBooks
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  period: week
                  topBooks:
                    - bookId: 0
                      cover: string
                      bookTitle: string
                      readingTime: 0
          headers: {}
      security: []
  /rewards/reading:
    post:
      summary: 领取阅读激励
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 领取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    enum:
                      - 200
                      - 400
                      - 401
                  message:
                    type: string
                  data:
                    type: object
                    properties: {}
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data: {}
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /user/reading-stats/timeline:
    get:
      summary: 用户阅读时长时间序列展示柱形图
      deprecated: false
      description: 返回用户阅读时长数据，前端自己展示柱形图
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                  - data
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      week:
                        $ref: '#/components/schemas/ReadingTimelineItem'
                      month:
                        $ref: '#/components/schemas/ReadingTimelineItem'
                      year:
                        $ref: '#/components/schemas/ReadingTimelineItem'
                      total:
                        $ref: '#/components/schemas/ReadingTimelineItem'
              example:
                code: 3
                message: in
                data:
                  week:
                    unit: year
                    list:
                      - date: '2026-08-22'
                        readingTime: 35991579
                      - date: '2026-07-16'
                        readingTime: 62892147
                  month:
                    unit: day
                    list:
                      - date: '2025-09-04'
                        readingTime: 43768181
                  year:
                    unit: month
                    list:
                      - date: '2026-12-06'
                        readingTime: 23940059
                  total:
                    unit: year
                    list:
                      - date: '2026-08-19'
                        readingTime: 78019187
          headers: {}
      security: []
  /user/reading-time/today:
    get:
      summary: 获取今日阅读时长
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      readingTime:
                        type: integer
                        minimum: 0
                        maximum: 1440
                    required:
                      - readingTime
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  readingTime: 45
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
        '500':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /book-reviews/{reviewId}:
    delete:
      summary: 删除书评
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: reviewId
          in: path
          description: ''
          required: true
          example: 26
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      deletedReviewId:
                        type: integer
                      remainingReviewCount:
                        type: integer
                    required:
                      - deletedReviewId
                      - remainingReviewCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  deletedReviewId: 0
                  remainingReviewCount: 0
          headers: {}
      security: []
  /notes/{noteId}:
    delete:
      summary: 删除笔记
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: noteId
          in: path
          description: ''
          required: true
          example: 26
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      deletedNoteId:
                        type: integer
                      remainingNoteCount:
                        type: integer
                    required:
                      - deletedNoteId
                      - remainingNoteCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  deletedNoteId: 0
                  remainingNoteCount: 0
          headers: {}
      security: []
  /user/profile:
    put:
      summary: 编辑个人信息
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  minLength: 2
                  maxLength: 20
                  nullable: true
                avatar:
                  type: string
                  format: uri
                  nullable: true
                bio:
                  type: string
                  maxLength: 200
                  nullable: true
            examples: {}
        required: true
      responses:
        '200':
          description: 个人信息更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      username:
                        type: string
                      avatar:
                        type: string
                      bio:
                        type: string
                    required:
                      - username
                      - avatar
                      - bio
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  data:
                    username: string
                    avatar: string
                    bio: string
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /user/highlights/recent:
    get:
      summary: 获取登录用户最新的3条划线
      deprecated: false
      description: 返回用户最新的3条划线记录，包括马克笔、波浪线、下划线三种类型
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Highlight'
                        maxItems: 5
                        minItems: 3
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /user/notes/recent6:
    get:
      summary: 获取登录用户最新的6条笔记
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/BookNote'
                        maxItems: 6
                        minItems: 6
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security:
        - bearerAuth: []
  /user/book-reviews/recent:
    get:
      summary: 获取登录用户最新的4条书评
      deprecated: false
      description: ''
      tags:
        - 个人中心
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/BookReview'
                        maxItems: 4
                        minItems: 4
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /user/following:
    get:
      summary: 获取登录用户关注瀑布流
      deprecated: false
      description: ''
      tags:
        - 用户关系
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            userId:
                              type: integer
                            username:
                              type: string
                            avatar:
                              type: string
                            bio:
                              type: string
                            isFollowing:
                              type: boolean
                            isFollower:
                              type: boolean
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: string
                    required:
                      - items
                      - hasMore
                      - nextCursor
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  items:
                    - userId: 0
                      username: string
                      avatar: string
                      bio: string
                      isFollowing: true
                      isFollower: true
                      followerCount: 0
                      followingCount: 0
                  hasMore: true
                  nextCursor: string
          headers: {}
      security: []
  /user/followers:
    get:
      summary: 获取登录用户粉丝瀑布流
      deprecated: false
      description: ''
      tags:
        - 用户关系
      parameters:
        - name: cursor
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: limit
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            userId:
                              type: integer
                            username:
                              type: string
                            avatar:
                              type: string
                            bio:
                              type: string
                            isFollowing:
                              type: boolean
                            isFollower:
                              type: boolean
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: integer
                    required:
                      - items
                      - hasMore
                      - nextCursor
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  items:
                    - userId: 0
                      username: string
                      avatar: string
                      bio: string
                      isFollowing: true
                      isFollower: true
                      followerCount: 0
                      followingCount: 0
                  hasMore: true
                  nextCursor: string
          headers: {}
      security: []
  /user/follow/{userId}:
    post:
      summary: 关注用户
      deprecated: false
      description: ''
      tags:
        - 用户关系
      parameters:
        - name: userId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 关注成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isFollowing:
                            type: boolean
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
    delete:
      summary: 取消关注用户
      deprecated: false
      description: ''
      tags:
        - 用户关系
      parameters:
        - name: userId
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 取消关注成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isFollowing:
                            type: boolean
                          followingCount:
                            type: integer
                            description: 当前用户的关注数
                          followerCount:
                            type: integer
                            description: 被关注用户的粉丝数
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /membership/packages:
    get:
      summary: 获取会员套餐列表
      deprecated: false
      description: ''
      tags:
        - 支付
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        packageId:
                          type: integer
                        packageName:
                          type: string
                        durationDays:
                          type: integer
                        originalPrice:
                          type: integer
                        discountPrice:
                          type: integer
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  - packageId: 0
                    name: string
                    durationDays: 0
                    originalPrice: 0
                    discountPrice: 0
          headers: {}
      security: []
  /membership/payment-info:
    get:
      summary: 获取会员支付页
      deprecated: false
      description: ''
      tags:
        - 支付
      parameters:
        - name: packageId
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      packageId:
                        type: integer
                      packageName:
                        type: string
                      durationDays:
                        type: integer
                      originalAmount:
                        type: integer
                      discountAmount:
                        type: integer
                      paymentMethods:
                        type: array
                        items:
                          type: string
                          enum:
                            - wechat
                            - alipay
                            - balance
                            - card
                    required:
                      - packageId
                      - packageName
                      - durationDays
                      - originalAmount
                      - discountAmount
                      - paymentMethods
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  packageId: 0
                  packageName: string
                  durationDays: 0
                  originalAmount: 0
                  discountAmount: 0
                  paymentMethods:
                    - wechat
          headers: {}
      security: []
  /membership/purchase:
    post:
      summary: 开通会员
      deprecated: false
      description: ''
      tags:
        - 支付
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                packageId:
                  type: integer
                paymentMethod:
                  type: string
              required:
                - packageId
                - paymentMethod
            example:
              packageId: 0
              paymentMethod: wechat
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      durationType:
                        type: string
                      durationDays:
                        type: integer
                    required:
                      - durationType
                      - durationDays
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  durationType: string
                  durationDays: 0
      security: []
  /recharge/packages:
    get:
      summary: 获取充值套餐列表
      deprecated: false
      description: ''
      tags:
        - 支付
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/RechargePackage'
          headers: {}
      security: []
  /recharge/payment-page:
    get:
      summary: 获取充值支付页
      deprecated: false
      description: ''
      tags:
        - 支付
      parameters:
        - name: packageId
          in: query
          description: ''
          required: true
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PaymentInfo'
          headers: {}
      security: []
  /recharge:
    post:
      summary: 充值充值币
      deprecated: false
      description: ''
      tags:
        - 支付
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - packageId
                - paymentMethod
              properties:
                packageId:
                  type: integer
                paymentMethod:
                  type: string
                  enum:
                    - wechat
                    - alipay
                    - unionpay
            examples: {}
        required: true
      responses:
        '200':
          description: 充值成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          orderId:
                            type: string
                          coinAmount:
                            type: integer
                          bonusCoins:
                            type: integer
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /search:
    get:
      summary: 搜索
      deprecated: false
      description: ''
      tags:
        - 搜索
      parameters:
        - name: keyword
          in: query
          description: ''
          required: true
          schema:
            type: string
        - name: type
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - all
              - books
              - authors
            default: all
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SearchResult'
          headers: {}
      security: []
  /book-reviews:
    post:
      summary: 发布书评
      deprecated: false
      description: ''
      tags:
        - 书籍详情
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - bookId
                - rating
                - content
              properties:
                bookId:
                  type: integer
                rating:
                  type: string
                  enum:
                    - recommend
                    - average
                    - not_recommend
                content:
                  type: string
                  minLength: 10
                  maxLength: 2000
                isPublic:
                  type: boolean
                  default: true
            example:
              bookId: 1
              rating: not_recommend
              content: cupidatat dolore laborum nostrud irure
              isPublic: false
        required: true
      responses:
        '201':
          description: 书评发布成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          review:
                            type: object
                            properties:
                              reviewId:
                                type: integer
                              book:
                                $ref: '#/components/schemas/SimpleBook'
                              rating:
                                type: string
                              content:
                                type: string
                              isPublic:
                                type: boolean
                              createdAt:
                                type: string
                                format: date-time
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /authors/{authorId}:
    get:
      summary: 获取作者详情
      deprecated: false
      description: ''
      tags:
        - 书籍详情
      parameters:
        - name: authorId
          in: path
          description: ''
          required: true
          example: 50
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      authorId:
                        type: integer
                      authorName:
                        type: string
                      authorBio:
                        type: string
                      followerCount:
                        type: integer
                      isFollowing:
                        type: boolean
                      works:
                        type: array
                        items:
                          type: object
                          properties:
                            bookId:
                              type: integer
                            bookTitle:
                              type: string
                            authorName:
                              type: string
                            cover:
                              type: string
                            rating:
                              type: integer
                            readCount:
                              type: integer
                            description:
                              type: string
                      workCount:
                        type: integer
                    required:
                      - authorId
                      - authorName
                      - authorBio
                      - followerCount
                      - isFollowing
                      - works
                      - workCount
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  authorId: 0
                  authorName: string
                  authorBio: string
                  followerCount: 0
                  isFollowing: true
                  works:
                    - bookId: 0
                      bookTitle: string
                      authorName: string
                      cover: string
                      rating: 0
                      readCount: 0
                      description: string
                  workCount: 0
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /books/{bookId}:
    get:
      summary: 获取书详情
      deprecated: false
      description: ''
      tags:
        - 书籍详情
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookDetail'
          headers: {}
      security: []
  /books/{bookId}/reviews:
    get:
      summary: 获取用户书评3条
      deprecated: false
      description: ''
      tags:
        - 书籍详情
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            avatar:
                              type: string
                              format: uri
                            username:
                              type: string
                            rating:
                              type: string
                              enum:
                                - recommend
                                - average
                                - not_recommend
                              nullable: true
                            reviewTime:
                              type: string
                              format: date-time
                            content:
                              type: string
                          minProperties: 9
                          required:
                            - rating
                        maxItems: 3
          headers: {}
      security: []
  /books/{bookId}/author-works:
    get:
      summary: 获取作者代表作3部
      deprecated: false
      description: ''
      tags:
        - 书籍详情
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            cover:
                              type: string
                              format: uri
                            bookTitle:
                              type: string
                            description:
                              type: string
                            bookId:
                              type: integer
                          required:
                            - bookId
                          minProperties: 3
                          maxProperties: 3
                        maxItems: 3
                    minProperties: 3
                    maxProperties: 3
          headers: {}
      security: []
  /books/{bookId}/related:
    get:
      summary: 获取相关推荐作品3部
      deprecated: false
      description: ''
      tags:
        - 书籍详情
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            cover:
                              type: string
                              format: uri
                            title:
                              type: string
                            description:
                              type: string
                            bookId:
                              type: integer
                          required:
                            - bookId
                          minProperties: 9
                    maxProperties: 3
          headers: {}
      security: []
  /books/{bookId}/mark-finished:
    put:
      summary: 标记书籍为已读完
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      bookId:
                        type: integer
                      newStatus:
                        type: string
                      finishedAt:
                        type: string
                      totalFinishedBooks:
                        type: integer
                      milestoneAchieved:
                        type: boolean
                      milestoneMessage:
                        type: string
                    required:
                      - bookId
                      - newStatus
                      - finishedAt
                      - totalFinishedBooks
                      - milestoneAchieved
                      - milestoneMessage
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  bookId: 0
                  newStatus: finished
                  finishedAt: '2025-12-25T07:13:15.740Z'
                  totalFinishedBooks: 0
                  milestoneAchieved: true
                  milestoneMessage: string
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /notes:
    post:
      summary: 发布笔记
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - bookId
                - quote
              properties:
                bookId:
                  type: integer
                chapterId:
                  type: integer
                  nullable: true
                quote:
                  type: string
                  minLength: 1
                lineType:
                  type: string
                  enum:
                    - marker
                    - wavy
                    - underline
                  default: marker
                thought:
                  type: string
                  minLength: 1
            example: "{\r\n    \"bookId\": 1,\r\n    \"chapterId\": 1,\r\n    \"quote\": \"科学边界这个组织很神秘。\",\r\n    \"lineType\": \"marker\"\r\n    // 不传 thought\r\n}"
        required: true
      responses:
        '201':
          description: 笔记发布成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          note:
                            type: object
                            properties:
                              noteId:
                                type: integer
                              quote:
                                type: string
                              lineType:
                                type: string
                              noteContent:
                                type: string
                              createdAt:
                                type: string
                                format: date-time
          headers: {}
        '400':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
        '401':
          type: object
          properties:
            code:
              type: integer
              example: 400
            message:
              type: string
            details:
              type: string
          description: ''
          headers: {}
      security: []
  /books/{bookId}/chapters/{chapterId}:
    get:
      summary: 获取章节信息和内容
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: chapterId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      chapterId:
                        type: integer
                      chapterTitle:
                        type: string
                      chapterNumber:
                        type: integer
                      content:
                        type: string
                      totalWords:
                        type: integer
                      totalPages:
                        type: integer
                      wordsPerPage:
                        type: integer
                      requireExperienceCard:
                        type: boolean
                      isLocked:
                        type: boolean
                      prevChapterId:
                        type: integer
                      nextChapterId:
                        type: integer
                      lastReadPosition:
                        type: integer
                    required:
                      - chapterId
                      - chapterTitle
                      - chapterNumber
                      - content
                      - totalWords
                      - totalPages
                      - wordsPerPage
                      - requireExperienceCard
                      - isLocked
                      - prevChapterId
                      - nextChapterId
                      - lastReadPosition
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  chapterId: 0
                  chapterTitle: string
                  chapterNumber: 5
                  content: string
                  totalWords: 3500
                  totalPages: 7
                  wordsPerPage: 500
                  requireExperienceCard: true
                  isLocked: true
                  prevChapterId: 0
                  nextChapterId: 0
                  lastReadPosition: 0
          headers: {}
      security: []
  /books/{bookId}/chapters/{chapterId}/notes:
    get:
      summary: 获取章节笔记列表
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: chapterId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        noteId:
                          type: integer
                        quote:
                          type: string
                        startIndex:
                          type: integer
                        endIndex:
                          type: integer
                        lineType:
                          type: array
                          items:
                            type: string
                        thought:
                          type: string
                        createdAt:
                          type: string
                        pageNumber:
                          type: integer
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data:
                  - noteId: 0
                    quote: string
                    startIndex: 0
                    endIndex: 0
                    lineType:
                      - marker
                    thought: string
                    createdAt: '2025-12-26T06:03:43.045Z'
                    pageNumber: 0
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /reader/{bookId}/chapters:
    get:
      summary: 获取书籍目录
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Chapter'
                        minItems: 10
          headers: {}
      security: []
  /reader/books/{bookId}/progress:
    post:
      summary: 更新阅读进度
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          schema:
            type: integer
        - name: chapterId
          in: query
          description: ''
          required: false
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                  data:
                    type: object
                    properties: {}
                required:
                  - code
                  - message
                  - data
              example:
                code: 200
                message: success
                data: {}
      security: []
  /reader/{bookId}/notes:
    get:
      summary: 获取全书笔记列表
      deprecated: false
      description: ''
      tags:
        - 阅读器
      parameters:
        - name: bookId
          in: path
          description: ''
          required: true
          example: 1
          schema:
            type: integer
        - name: Authorization
          in: header
          description: ''
          example: Bearer {{token}}
          schema:
            type: string
            default: Bearer {{token}}
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Note'
          headers: {}
      security: []
components:
  schemas:
    ReadingTimelineItem:
      type: object
      required:
        - unit
        - list
      properties:
        unit:
          type: string
          enum:
            - day
            - month
            - year
        list:
          type: array
          items:
            type: object
            required:
              - date
              - readingTime
            properties:
              date:
                type: string
              readingTime:
                type: integer
                minimum: 0
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          enum:
            - 200
            - 400
            - 401
          example: 200
        message:
          type: string
          example: success
        data:
          nullable: true
          oneOf:
            - type: string
            - type: integer
            - type: boolean
            - type: array
            - type: object
            - type: number
    SimpleBook:
      type: object
      properties:
        cover:
          type: string
          format: uri
          description: 封面图URL
        bookTitle:
          type: string
          description: 书名
        authorName:
          type: string
          description: 作者名
        authorId:
          type: integer
          description: 作者id
        rating:
          type: integer
          description: 推荐值
          maximum: 100
        readCount:
          type: integer
          description: 今日阅读人数
        description:
          type: string
          description: 作品简介
      required:
        - cover
        - bookTitle
        - authorName
        - authorId
    BookDetail:
      allOf:
        - $ref: '#/components/schemas/SimpleBook'
        - type: object
          properties:
            isInBookshelf:
              type: boolean
              description: 是否加入书架
            hasStarted:
              type: boolean
              description: 是否开始阅读
            readingCount:
              type: integer
              description: 在读人数
            finishedCount:
              type: integer
              description: 读完人数
            readingStatus:
              type: string
              enum:
                - not_started
                - reading
                - finished
              description: 我的阅读状态
            wordCount:
              type: integer
              description: 字数
            publishDate:
              type: string
              format: date
              description: 出版时间
            isFreeForMember:
              type: boolean
              description: 体验卡是否可读
            price:
              type: integer
              description: 电子书价格（分）
            ratingDetail:
              type: object
              properties:
                recommendPercent:
                  type: number
                  format: float
                  description: 推荐百分比
                averagePercent:
                  type: number
                  format: float
                  description: 一般百分比
                notRecommendPercent:
                  type: number
                  format: float
                  description: 不行百分比
              description: |
                点评百分比
            ratingCount:
              type: integer
              description: 点评人数
            authorBio:
              type: string
              description: 作者简介
    UserSimpleVO:
      type: object
      properties:
        userId:
          type: integer
        username:
          type: string
        avatar:
          type: string
          format: uri
        bio:
          type: string
    UserProfile:
      type: object
      properties:
        avatar:
          type: string
          format: uri
          description: 用户头像
        username:
          type: string
          description: 用户名
        bio:
          type: string
          description: 用户简介
        followingCount:
          type: integer
          description: 关注数
        followerCount:
          type: integer
          description: 粉丝数
        postCount:
          type: integer
          description: 帖子数
        experienceCardCount:
          type: integer
          description: 体验卡数
          maximum: 30
          minimum: 0
        coinCount:
          type: integer
          description: 充值币数
        isMember:
          type: boolean
          description: 是否是会员
        memberExpireDays:
          type: integer
          description: 会员剩余天数
        readingStats:
          type: object
          properties:
            weeklyReadingTime:
              type: integer
              description: 周阅读时长（分钟）
              maximum: 1000
              minimum: 0
            monthlyReadingTime:
              type: integer
              description: 月阅读时长（分钟）
              minimum: 0
              maximum: 2000
            yearlyReadingTime:
              type: integer
              description: 年阅读时长（分钟）
              minimum: 0
            totalReadingTime:
              type: integer
              description: 总阅读时长（分钟）
              minimum: 0
              maximum: 40000
            weeklyBooksRead:
              type: integer
              description: 本周读过的书籍列表
              minimum: 0
              maximum: 50
            monthlyBooksRead:
              type: integer
              description: 本月读过的书籍列表
              minimum: 0
              maximum: 50
            yearlyBooksRead:
              type: integer
              description: 今年读过的书籍列表
              minimum: 0
              maximum: 50
            totalBooksRead:
              type: integer
              description: 总共读过的书籍列表
              minimum: 0
              maximum: 50
            weeklyBooksFinished:
              type: integer
              description: 本周读完的书籍数量
            monthlyBooksFinished:
              type: integer
              description: 本月读完的书籍数量
            yearlyBooksFinished:
              type: integer
              description: 今年读完的书籍数量
            totalBooksFinished:
              type: integer
              description: 总共读完的书籍数量
            weeklyNoteCount:
              type: integer
              description: 周笔记数量
            monthlyNoteCount:
              type: integer
              description: 月笔记数量
            yearlyNoteCount:
              type: integer
              description: 年笔记数量
            totalNoteCount:
              type: integer
              description: 总笔记数量
          required:
            - weeklyReadingTime
            - monthlyReadingTime
            - yearlyReadingTime
            - totalReadingTime
            - weeklyBooksRead
            - monthlyBooksRead
            - yearlyBooksRead
            - totalBooksRead
            - weeklyBooksFinished
            - monthlyBooksFinished
            - yearlyBooksFinished
            - totalBooksFinished
            - weeklyNoteCount
            - monthlyNoteCount
            - yearlyNoteCount
            - totalNoteCount
        consecutiveReadingDays:
          type: integer
          description: 连续阅读天数
      required:
        - username
        - avatar
        - followingCount
        - followerCount
        - postCount
        - experienceCardCount
        - coinCount
        - isMember
        - consecutiveReadingDays
    Post:
      type: object
      properties:
        postId:
          type: integer
        author:
          type: object
          properties:
            authorAvatar:
              type: string
              format: uri
              description: 发帖人头像
            authorName:
              type: string
              description: 发帖人名字
          required:
            - authorAvatar
            - authorName
        publishTime:
          type: string
          format: date-time
          description: 发布时间
        publishLocation:
          type: string
          description: 发布地点
        isFollowingAuthor:
          type: boolean
          description: 登录用户是否关注作者
        postTitle:
          type: string
          description: 帖子标题
        content:
          type: string
          description: 帖子正文
        mentionedBooks:
          type: array
          items:
            $ref: '#/components/schemas/SimpleBook'
          description: 帖子提及书籍列表
        commentCount:
          type: integer
          description: 评论数
        likeCount:
          type: integer
          description: 点赞数
        isLiked:
          type: boolean
          description: 是否已点赞
        topics:
          type: array
          items:
            type: string
            description: |
              话题名称
          description: 话题列表
      required:
        - author
    Comment:
      type: object
      properties:
        avatar:
          type: string
          format: uri
          description: 评论头像
        username:
          type: string
          description: 评论用户名称
        commentTime:
          type: string
          format: date-time
          description: 评论时间
        content:
          type: string
          description: 评论内容
        likeCount:
          type: integer
          description: 评论点赞数
        replyCount:
          type: integer
          description: 子评论数
        isLiked:
          type: boolean
          description: 是否已点赞
        replyToUsername:
          type: string
          description: 被回复的用户名，null表示不是回复评论
        replyToUserId:
          type: integer
          description: 被回复的用户ID
        isReply:
          type: boolean
          description: 是否是回复评论（replyToUsername不为null）
    SearchResult:
      type: object
      properties:
        books:
          type: array
          items:
            $ref: '#/components/schemas/SimpleBook'
        authors:
          type: array
          items:
            type: object
            properties:
              avatar:
                type: string
                format: uri
              followerCount:
                type: integer
              name:
                type: string
              representativeWork:
                type: array
                items:
                  type: string
                  description: |
                    代表作名称
              bio:
                type: string
    Chapter:
      type: object
      properties:
        startPage:
          type: integer
        chapterNumber:
          type: integer
        chapterName:
          type: string
        chapterId:
          type: integer
      required:
        - chapterId
    Note:
      type: object
      properties:
        noteId:
          type: integer
        bookId:
          type: integer
        bookTitle:
          type: string
        chapterId:
          type: integer
        chapterName:
          type: string
        noteType:
          type: string
          description: 笔记类型：划线或想法
          enum:
            - line
            - thought
        quote:
          type: string
          description: 原文引用内容
        startIndex:
          type: integer
          description: 笔记起始位置（字符索引）
        endIndex:
          type: integer
          description: 笔记结束位置（字符索引）
        pageNumber:
          type: integer
          description: 笔记页码
        lineType:
          type: string
          description: 划线类型（马克笔、直线、波浪线）
        thought:
          type: string
          description: 想法
        noteCreatedAt:
          type: string
          format: date-time
      required:
        - noteId
        - bookId
        - bookTitle
        - chapterId
        - chapterName
        - quote
        - startIndex
        - endIndex
        - pageNumber
        - lineType
        - thought
        - noteCreatedAt
        - noteType
    Highlight:
      type: object
      properties:
        bookTitle:
          type: string
        content:
          type: string
        chapterName:
          type: string
        highlightDate:
          type: string
          format: date
    BookNote:
      type: object
      properties:
        bookTitle:
          type: string
        quote:
          type: string
        noteContent:
          type: string
        noteDate:
          type: string
          format: date
    BookReview:
      type: object
      properties:
        cover:
          type: string
          format: uri
        bookTitle:
          type: string
        reviewDate:
          type: string
          format: date
        helpfulCount:
          type: integer
          minimum: 1
        reviewContent:
          type: string
        rating:
          type: string
          enum:
            - recommend
            - average
            - not_recommend
    RechargePackage:
      type: object
      properties:
        coinAmount:
          type: integer
          description: 充值币数
        cnyAmount:
          type: number
          format: float
          description: 人民币数
        bonusCoins:
          type: integer
          description: 赠送充值币数
    PaymentInfo:
      type: object
      properties:
        coinAmount:
          type: integer
          description: 充值币数
        bonusCoins:
          type: integer
          description: 赠送币数
        actualAmount:
          type: number
          format: float
          description: 实付金额
        paymentMethods:
          type: array
          items:
            type: string
            enum:
              - wechat
              - alipay
              - balance
              - card
          description: 支付方式
    PublishPostRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
        content:
          type: string
          minLength: 1
        bookIds:
          type: array
          items:
            type: integer
        topics:
          type: array
          items:
            type: string
      required:
        - title
        - content
    LikeRequest:
      type: object
      properties:
        targetId:
          type: integer
        targetType:
          type: string
          enum:
            - post
            - comment
      required:
        - targetId
        - targetType
  responses: {}
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
servers: []
security: []
